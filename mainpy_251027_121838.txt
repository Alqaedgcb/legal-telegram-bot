{
  "name": "Legal_Consultation_Telegram_Bot",
  "description": "Ø¨ÙˆØª Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø°ÙƒÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ§Ù„Ù…Ø­Ø§Ù…ÙŠÙ† Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…ØŒ Ù…Ø¹ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø¯ÙŠØ± ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ±Ø¨Ø· n8n Ù„Ø§Ø­Ù‚Ø§Ù‹.",
  "language": "python",
  "entry_point": "main.py",
  "dependencies": [
    "python-telegram-bot==20.8"
  ],
  "files": {
    "main.py": "# ===========================\n# ğŸ¤– Legal Consultation Bot\n# ===========================\nimport os\nimport logging\nfrom telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup\nfrom telegram.ext import Application, CommandHandler, CallbackQueryHandler, MessageHandler, filters, ContextTypes\n\n# âš ï¸ Ø¶Ø¹ Ù‡Ù†Ø§ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©\nBOT_TOKEN = \"8228823766:AAEd-LfKPPkGmurbNSQdBkNgEVpwpw_Lre8\"\nMANAGER_CHAT_ID = \"1101452818\"\n\n# Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©\nusers_db = {}\npending_approvals = {}\nuser_warnings = {}\n\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\nasync def start(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    user = update.effective_user\n    user_id = user.id\n\n    if user_id in users_db and users_db[user_id].get('banned'):\n        await update.message.reply_text(\"âŒ ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª.\")\n        return\n\n    if user_id not in users_db or not users_db[user_id].get('approved'):\n        keyboard = [[InlineKeyboardButton(\"âœ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\", callback_data=f\"approve_{user_id}\"), InlineKeyboardButton(\"âŒ Ø±ÙØ¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\", callback_data=f\"reject_{user_id}\")]]\n        reply_markup = InlineKeyboardMarkup(keyboard)\n        try:\n            await context.bot.send_message(\n                chat_id=MANAGER_CHAT_ID,\n                text=f\"ğŸ†• Ø·Ù„Ø¨ Ø§Ù†Ø¶Ù…Ø§Ù… Ø¬Ø¯ÙŠØ¯:\\n\\nğŸ‘¤ {user.first_name} {user.last_name or ''}\\nğŸ“› @{user.username or 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}\\nğŸ†” {user_id}\\n\\nØ§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:\",\n                reply_markup=reply_markup)\n\n            pending_approvals[user_id] = {\n                'first_name': user.first_name,\n                'last_name': user.last_name,\n                'username': user.username\n            }\n            await update.message.reply_text(\"â³ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©.\")\n        except Exception as e:\n            await update.message.reply_text(\"âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.\")\n            logger.error(e)\n    else:\n        await show_main_menu(update, context)\n\nasync def show_main_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    keyboard = [\n        [InlineKeyboardButton(\"ğŸ“ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙÙˆØ±ÙŠØ©\", callback_data=\"consultation\")],\n        [InlineKeyboardButton(\"âš–ï¸ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©\", callback_data=\"services\")],\n        [InlineKeyboardButton(\"ğŸ¢ Ø¹Ù† Ø§Ù„Ù…ÙƒØªØ¨ ÙˆØ§Ù„Ù…Ø­Ø§Ù…ÙŠÙ†\", callback_data=\"about\")],\n        [InlineKeyboardButton(\"ğŸ“ Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø©\", callback_data=\"appointment\")]\n    ]\n    reply_markup = InlineKeyboardMarkup(keyboard)\n    text = \"\"\"ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø°ÙƒÙŠ.\nØ§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:\"\"\"\n    if update.message:\n        await update.message.reply_text(text, reply_markup=reply_markup)\n    else:\n        await update.callback_query.edit_message_text(text, reply_markup=reply_markup)\n\nasync def handle_approval(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    query = update.callback_query\n    await query.answer()\n    action, user_id = query.data.split('_')\n    user_id = int(user_id)\n\n    if action == \"approve\":\n        users_db[user_id] = {'approved': True, 'warnings': 0}\n        pending_approvals.pop(user_id, None)\n        await context.bot.send_message(chat_id=user_id, text=\"ğŸ‰ ØªÙ… Ù‚Ø¨ÙˆÙ„Ùƒ! Ø§ÙƒØªØ¨ /start Ù„Ù„Ø¨Ø¯Ø¡.\")\n        await query.edit_message_text(f\"âœ… ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… {user_id}\")\n\n    elif action == \"reject\":\n        pending_approvals.pop(user_id, None)\n        await context.bot.send_message(chat_id=user_id, text=\"âŒ ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨Ùƒ.\")\n        await query.edit_message_text(f\"âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… {user_id}\")\n\nasync def handle_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    query = update.callback_query\n    await query.answer()\n    data = query.data\n\n    if data == \"consultation\":\n        await query.edit_message_text(\n            \"ğŸ“ Ø£Ø±Ø³Ù„ ÙˆØµÙ Ù…Ø´ÙƒÙ„ØªÙƒ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø¨Ø§Ù„ØªÙØµÙŠÙ„ ÙˆØ³ÙŠØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø£Ø­Ø¯ Ø§Ù„Ù…Ø­Ø§Ù…ÙŠÙ†.\")\n\n    elif data == \"services\":\n        await query.edit_message_text(\n            \"âš–ï¸ Ø®Ø¯Ù…Ø§ØªÙ†Ø§:\\nâ€¢ ØµÙŠØ§ØºØ© Ø§Ù„Ø¹Ù‚ÙˆØ¯\\nâ€¢ Ø§Ù„Ù…Ø±Ø§ÙØ¹Ø§Øª\\nâ€¢ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª\\nâ€¢ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ©\")\n\n    elif data == \"about\":\n        await query.edit_message_text(\n            \"ğŸ¢ Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©:\\nÙ†Ø­Ù† Ù…Ø­Ø§Ù…ÙˆÙ† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ù…Ø®ØªÙ„Ù Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§.\\nğŸ“ +967776086053\\nğŸ“§ info@lawfirm.com\")\n\n    elif data == \"appointment\":\n        await query.edit_message_text(\n            \"ğŸ“ Ù„Ù„Ø­Ø¬Ø²ØŒ Ø£Ø±Ø³Ù„ Ø§Ø³Ù…Ùƒ ÙˆÙ†ÙˆØ¹ Ø§Ù„Ù‚Ø¶ÙŠØ© ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø·Ù„ÙˆØ¨.\")\n\nasync def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    user_id = update.effective_user.id\n    text = update.message.text.lower()\n\n    if user_id not in users_db or not users_db[user_id].get('approved'):\n        await update.message.reply_text(\"â³ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„ÙŠÙƒ.\")\n        return\n\n    forbidden = [\"http://\", \"https://\", \".com\", \"Ø³Ø¨\", \"Ø´ØªÙ…\", \"Ù‚Ø°Ù\"]\n    for bad in forbidden:\n        if bad in text:\n            user_warnings[user_id] = user_warnings.get(user_id, 0) + 1\n            count = user_warnings[user_id]\n            if count >= 3:\n                users_db[user_id]['banned'] = True\n                await update.message.reply_text(\"âŒ ØªÙ… Ø­Ø¸Ø±Ùƒ Ø¨Ø³Ø¨Ø¨ Ù…Ø®Ø§Ù„ÙØ§Øª Ù…ØªÙƒØ±Ø±Ø©.\")\n                await context.bot.send_message(chat_id=1101452818, text=f\"ğŸš¨ ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… {user_id}\")\n                return\n            else:\n                await update.message.reply_text(f\"âš ï¸ ØªØ­Ø°ÙŠØ± ({count}/3): ÙŠÙ…Ù†Ø¹ Ù†Ø´Ø± Ø±ÙˆØ§Ø¨Ø· Ø£Ùˆ ÙƒÙ„Ù…Ø§Øª Ù…Ø³ÙŠØ¦Ø©.\")\n                await context.bot.send_message(chat_id=1101452818, text=f\"âš ï¸ Ù…Ø®Ø§Ù„ÙØ© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… {user_id}\")\n                return\n\n    await update.message.reply_text(\"âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø³Ø§Ù„ØªÙƒØŒ Ø³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.\")\n\nasync def ban_command(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    if str(update.effective_user.id) != MANAGER_CHAT_ID:\n        return\n    if context.args:\n        try:\n            uid = int(context.args[0])\n            users_db[uid] = {'banned': True}\n            await update.message.reply_text(f\"âœ… ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… {uid}\")\n        except:\n            await update.message.reply_text(\"âŒ Ø±Ù‚Ù… ØºÙŠØ± ØµØ§Ù„Ø­.\")\n\ndef main():\n    if BOT_TOKEN.startswith(\"8228823766:AAEd-LfKPPkGmurbNSQdBkNgEVpwpw_Lre8\"):\n        print(\"âŒ Ø¹Ø¯Ù‘Ù„ Ø§Ù„ØªÙˆÙƒÙ† ÙˆØ§Ù„Ù…Ø¹Ø±Ù Ø£ÙˆÙ„Ø§Ù‹.\")\n        return\n    app = Application.builder().token(BOT_TOKEN).build()\n    app.add_handler(CommandHandler(\"start\", start))\n    app.add_handler(CommandHandler(\"ban\", ban_command))\n    app.add_handler(CallbackQueryHandler(handle_approval, pattern=\"^(approve|reject)_\"))\n    app.add_handler(CallbackQueryHandler(handle_menu, pattern=\"^(consultation|services|about|appointment)$\"))\n    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))\n    print(\"ğŸ¤– Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†...\")\n    app.run_polling()\n\nif __name__ == \"__main__\":\n    main()\n"
  }
}
# -------------------------------
# ğŸš€ Fake web server for Render
# -------------------------------
from flask import Flask
app = Flask(__name__)

@app.route('/')
def home():
    return "Legal Bot is running!"

if __name__ == "__main__":
    from threading import Thread
    Thread(target=lambda: app.run(host="0.0.0.0", port=10000)).start()
    main()
